task :_console_setup do
  require File.join(ENV['HOME'], 'lib', 'ruby', 'console')
end

%w{staging production}.each do |env|
  task env => :_console_setup do
    Console.env = env
  end
end

desc "ssh into the server for the current app"
task :terminal => :_console_setup do
  sh Console.command("\\$SHELL")
end

desc "./script/console current app on the server"
task :console => :_console_setup do
  sh Console.command("./script/console #{Console.env}")
end

desc "sftp to current app"
task :sftp => :_console_setup do
  sh "sftp #{Console.config['host']}:#{Console.config['dir']}"
end
